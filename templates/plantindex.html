<!DOCTYPE html>
<html>

<head>
    <title>Plantgrower!</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #111;
            overflow: hidden;
        }

        #video-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .overlay-text {
            position: absolute;
            top: 20px;
            left: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-family: sans-serif;
            font-size: 14px;
            pointer-events: none;
            z-index: 10;
        }
    </style>
</head>

<body>
    <div id="video-container">
        <div class="overlay-text"><b>Left Hand:</b> Water (Heal/Grow)<br><b>Right Hand:</b> Fire (Char/Burn)</div>
        <img id="videoStream" src="" alt="Waiting for Camera...">
    </div>
    <script>
        const socket = io({
            reconnection: true,
            reconnectionDelay: 1000,
            timeout: 20000,
            transports: ['polling', 'websocket'],
            secure: true,
            rejectUnauthorized: false
        });

        const img = document.getElementById('videoStream');
        socket.on('new_frame', function (data) {
            img.src = 'data:image/jpeg;base64,' + data.image;
        });

        socket.on('connect', () => { console.log("Connected to Python backend"); });
    </script>
</body>

</html>